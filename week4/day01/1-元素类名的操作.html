<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=div, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
</head>

<body>
    <div class="box qqq">
        hello world
    </div>
</body>

</html>
<script>
    // 自己封装方法，可以实现hasClass addClass removeClass的功能
    var box = document.getElementsByClassName('box')[0];
    // hasClass(box, 'qqq'); //false  判断元素是否有对应的类名
    // //方法一
    // function hasClass(ele, cln) {
    //     // 先获取元素的所有类名，在查看类名中有没有指定的类名
    //     let str = ele.className;
    //     // 把类名字符串按照空格拆分成数组，然后判断数组中是否有对应的类名
    //     let reg = / +/g;
    //     let ary = str.split(reg);
    //     if (ary.indexOf(cln) != -1) {
    //         return true
    //     }
    //     return false
    // }


    // // 换一种方法  把类名做成一个正则，而它需要有左右边界

    // function hasClass(ele, cln) {
    //     let str = ele.className;
    //     let reg = new RegExp(`\\b${cln}\\b`, 'g');
    //     return reg.test(str);
    // }

    // //方法三
    // let reg = new RegExp(`(^| +)${cln}( +|$)`);
    // return reg.test(str);

    // //判断多个类名   

    HTMLElement.prototype.hasClass = function hasClass(cln = '') {
        if(!cln.replace(/^ +| +$/g, '').length)return false;
        cln = cln.replace(/^ +| +$/g, '')
        let ary = cln.split(/ +/g);
        let str = this.className;
        let flag = true;
        for (let i = 0; i < ary.length; i++) {
            let temp = ary[i];
            let reg = new RegExp('(^| +)' + temp + '( +|$)')
            if (!reg.test(str)) {
                flag = false;
                break;
            }
        } 
        return flag;
    }
    box.hasClass('qqqaaa   box5  box23');

    //封装添加单个 多个 类名的方法
    HTMLElement.prototype.addClass = function addClass(cln) {
        // 单个类名   先查看有没有对应的类名，没有再去添加；
        // this ---》 box
        if (this.hasClass(cln)) return;
        cln = cln || '';
        cln = cln.replace(/^ +| +$/g, '');
        let ary = cln.split(/ +/);
        let  str = this.className;
        for (let i = 0; i < ary.length; i++) {
            if (!this.hasClass(ary[i])) {
                str += ' ' + ary[i];
            }
            str = str.replace(/ +/g, ' ').replace(/^ +| +$/g, '');// 把多个空格替换成一个空格
            this.className = str;
        }
        // if(this.hasClass(cln))return;
        // this.className += ' '+cln;// 加空格是为了防止zcln和className 的最后一个单词拼成一个词
    }
    HTMLElement.prototype.removeClass = function (cln) {
        cln = cln || '';
        cln = cln.replace(/^ +| +$/g, '');
        let ary = cln.split(/ +/);
        let str = this.className;
        for (let i = 0; i < ary.length; i++) {
            let reg = new RegExp('\\b' + ary[i] + '\\b', 'g')
            str = str.replace(reg, '')
        }
        str = str.replace(/ +/g, ' ').replace(/^ +| +$/g, '');// 把多个空格替换成一个空格
        this.className = str;
    }
    HTMLElement.prototype.toggleClass = function (cln) {
        if (this.hasClass(cln)) {
            this.removeClass(cln)
        } else {
            this.addClass(cln)
        }
    }
    // box.toggleClass('box');//有这个类名就删除  没这个类名就添加
</script>